<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi ti·∫øt s·∫£n ph·∫©m - Creamy Tea</title>
    <link rel="stylesheet" href="Styles/trasuakemdau.css">
      <link rel="stylesheet" href="Styles/timkiem.css">
   <script src="Scripts/search.js" defer></script>
        <link rel="icon" type="image/png" href="images/LOGO P2_preview_rev_1.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
<div class="tong">
    <!-- Th√™m icon gi·ªè h√†ng v√†o ƒë√¢y -->
    <div class="notification-modal" id="notification-modal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="modal-text">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng!</div>
            <button class="modal-close">ƒê√≥ng</button>
        </div>
    </div>
    <div class="cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </div>

    <div class="header">
        <div class="tren">
            <div class="iconcha">
                <div class="icon">‚ò∞</div>
            </div>
            <div class="menu">
                <nav>
                    <a href="index.html">Trang Ch·ªß</a>
                    <a href="index2.html">V·ªÅ Ch√∫ng T√¥i</a>
                    <a href="menu.html">Menu</a>
                    <a href="tintuc.html">Tin T·ª©c</a>
                    <a href="lienhe.html">Li√™n h·ªá</a>
                    <div class="search-container">
                        <input type="text" placeholder="T√¨m ki·∫øm..." class="search-input">
                        <button type="submit" class="search-button">üîç</button>
                    </div>
                </nav>
            </div>
        </div>
    </div>  

    <div class="menu-container" style="background-color: #FFF8E7;">
        <div class="menu-header">
            <h1>S·∫£n Ph·∫©m</h1>
            <p><a href="index.html">Trang Ch·ªß</a>><a href="menu.html">S·∫£n Ph·∫©m</a>><a href="others.html">ƒê·ªì U·ªëng Kh√°c</a></p>
        </div>

        <div class="product-container">
            <div class="product-image">
                <img src="images/do uong khac/milo giam.jpg" alt="S·∫£n ph·∫©m">
            </div>
            <div class="product-details">
                <h1 class="product-title">TR√Ä S·ªÆA MILO D·∫∞M</h1>
                <div class="product-price">35,000ƒë</div>
                <p class="topping-note">Ch∆∞a c√≥ topping</p>
                
                <div class="topping-section">
                    <h3>Ch·ªçn Topping</h3>
                    <div class="topping-options">
                        <button class="topping-btn">Kh√¥ng</button>
                        <button class="topping-btn">ƒê·∫≠u ƒë·ªè</button>
                        <button class="topping-btn">Pudding</button>
                        <button class="topping-btn">Th·∫°ch d·ª´a</button>
                        <button class="topping-btn">Th·∫°ch ƒëen</button>
                        <button class="topping-btn">Tr√¢n ch√¢u tr·∫Øng</button>
                        <button class="topping-btn">Tr√¢n ch√¢u ho√†ng kim</button>
                        <button class="topping-btn">Kem cheese</button>
                        <button class="topping-btn">Foam tr·ª©ng</button>
                        <button class="topping-btn">Tr√¢n ch√¢u ƒë∆∞·ªùng ƒëen</button>
                    </div>
                </div>

                <div class="quantity-section">
                    <h3>Ch·ªçn s·ªë l∆∞·ª£ng</h3>
                    <div class="quantity-control">
                        <button class="quantity-btn minus">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="quantity-btn plus">+</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
                    <button class="buy-now">Xem gi·ªè h√†ng</button>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom">
        <div class="bottom-content">
            <div class="logo">
                <img src="Logo/logo.jpg" alt="Creamy Tea Logo">
            </div>
            <div class="info-container">
                <div class="copyright">
                    ¬© CREAMY TEA . made by fresh cream
                </div>
                <div class="contact-info">
                    <p class="address">ƒê·ªãa ch·ªâ: 935/7/43C B√¨nh gi√£ / V≈©ng T√†u</p>
                    <p class="email">Email: tranhuyhoang159753@gmail.com</p>
                </div>
            </div>
            <div class="social-icons">
                <a href="https://www.facebook.com/profile.php?id=100065041573512&locale=vi_VN">
                    <img src="images/facebook logos vector (AI, EPS, SVG, PDF, CDR) free download_preview_rev_1.png" alt="Facebook">
                </a>
                <a href="https://www.tiktok.com/@hoangtran.chm?lang=vi-VN">
                    <img src="images/Tik Tok Icon Circle PNG Transparent With Clear Background ID 473286 _ TopPNG_preview_rev_1.png" alt="TikTok">
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    // Menu toggle
    document.querySelector('.icon').addEventListener('click', function() {
        document.querySelector('.menu').classList.toggle('active');
        this.classList.toggle('active');
        this.innerHTML = this.classList.contains('active') ? '‚úñ' : '‚ò∞';
    });

    // Quantity control
    const quantityInput = document.querySelector('.quantity-input');
    let currentQuantity = 1;

    document.querySelector('.minus').addEventListener('click', () => {
        if (currentQuantity > 1) {
            currentQuantity--;
            quantityInput.value = currentQuantity;
        }
    });

    document.querySelector('.plus').addEventListener('click', () => {
        currentQuantity++;
        quantityInput.value = currentQuantity;
    });

    // C·∫≠p nh·∫≠t khi ng∆∞·ªùi d√πng nh·∫≠p tr·ª±c ti·∫øp
    quantityInput.addEventListener('change', (e) => {
        let value = parseInt(e.target.value);
        if (value < 1) value = 1;
        currentQuantity = value;
        quantityInput.value = currentQuantity;
    });

    // Topping selection
    const toppingBtns = document.querySelectorAll('.topping-btn');
    toppingBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            btn.classList.toggle('active');
        });
    });

    // Kh·ªüi t·∫°o gi·ªè h√†ng t·ª´ localStorage ho·∫∑c t·∫°o m·ªõi
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng hi·ªÉn th·ªã tr√™n icon gi·ªè h√†ng
    function updateCartIcon() {
        const cartCount = document.querySelector('.cart-count');
        const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
        cartCount.textContent = totalItems;
    }

    // X·ª≠ l√Ω th√™m v√†o gi·ªè h√†ng
    document.querySelector('.add-to-cart').addEventListener('click', function(e) {
        // L·∫•y th√¥ng tin s·∫£n ph·∫©m
        const product = {
            name: document.querySelector('.product-title').textContent,
            price: document.querySelector('.product-price').textContent,
            image: document.querySelector('.product-image img').src,
            quantity: currentQuantity,
            toppings: Array.from(document.querySelectorAll('.topping-btn.active'))
                         .map(btn => btn.textContent)
        };

        // Ki·ªÉm tra s·∫£n ph·∫©m ƒë√£ c√≥ trong gi·ªè h√†ng ch∆∞a
        const existingProductIndex = cart.findIndex(item => 
            item.name === product.name && 
            JSON.stringify(item.toppings) === JSON.stringify(product.toppings)
        );

        if (existingProductIndex !== -1) {
            cart[existingProductIndex].quantity += currentQuantity;
        } else {
            cart.push(product);
        }

        // L∆∞u gi·ªè h√†ng v√†o localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        // T·∫°o hi·ªáu ·ª©ng bay v√†o gi·ªè
        for(let i = 0; i < currentQuantity; i++) {
            setTimeout(() => {
                const flyingDot = document.createElement('div');
                flyingDot.className = 'flying-item';
                
                const buttonRect = this.getBoundingClientRect();
                flyingDot.style.left = buttonRect.left + 'px';
                flyingDot.style.top = buttonRect.top + 'px';
                
                document.body.appendChild(flyingDot);
                
                const cart = document.querySelector('.cart-icon');
                const cartRect = cart.getBoundingClientRect();
                
                setTimeout(() => {
                    flyingDot.style.left = cartRect.left + 'px';
                    flyingDot.style.top = cartRect.top + 'px';
                    flyingDot.style.opacity = '0';
                    flyingDot.style.transform = 'scale(0.3)';
                    
                    setTimeout(() => {
                        updateCartIcon();
                        document.body.removeChild(flyingDot);
                    }, 800);
                }, 0);
            }, i * 200);
        }
    });

    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng ban ƒë·∫ßu
    updateCartIcon();

    // Chuy·ªÉn ƒë·∫øn trang gi·ªè h√†ng khi click v√†o icon ho·∫∑c n√∫t xem gi·ªè h√†ng
    // Hi·ªÉn th·ªã modal th√¥ng b√°o
    function showNotification() {
        const modal = document.getElementById('notification-modal');
        modal.style.display = 'flex';
    }
    
    // ƒê√≥ng modal khi click n√∫t ƒë√≥ng
    document.querySelector('.modal-close').addEventListener('click', () => {
        document.getElementById('notification-modal').style.display = 'none';
    });
    
    // ƒê√≥ng modal khi click b√™n ngo√†i
    document.getElementById('notification-modal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('notification-modal')) {
            document.getElementById('notification-modal').style.display = 'none';
        }
    });
    
    // S·ª≠a l·∫°i event listener cho cart icon v√† n√∫t xem gi·ªè h√†ng
    document.querySelector('.cart-icon').addEventListener('click', () => {
        const cartCount = document.querySelector('.cart-count');
        if (parseInt(cartCount.textContent) === 0) {
            showNotification();
            return;
        }
        window.location.href = 'cart.html';
    });
    
    document.querySelector('.buy-now').addEventListener('click', () => {
        const cartCount = document.querySelector('.cart-count');
        if (parseInt(cartCount.textContent) === 0) {
            showNotification();
            return;
        }
        window.location.href = 'cart.html';
    });
    
</script>
</body>
</html>
